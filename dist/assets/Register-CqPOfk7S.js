import{_ as E,u as q,m as S,r as _,p as T,a,c as A,b as B,d as r,e as s,w as o,h as u,t as D,s as F,E as m}from"./index-DoAYnoBG.js";const M={class:"register-page"},N={class:"register-container"},L={class:"register-form-wrapper"},Z={class:"form-footer"},I={class:"login-tip"},$={class:"register-banner"},j={class:"banner-content"},G={class:"banner-features"},H={class:"feature-item"},J={class:"feature-item"},K={class:"feature-item"},O={__name:"Register",setup(Q){const b=q(),V=S(),p=_(),d=_(!1),f=_(!1),t=T({username:"",nickname:"",email:"",password:"",confirmPassword:""}),k={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含字母、数字和下划线",trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{min:2,max:20,message:"昵称长度在 2 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"密码必须包含大小写字母和数字",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(g,e,n)=>{e!==t.password?n(new Error("两次输入的密码不一致")):n()},trigger:"blur"}]},v=async()=>{if(p.value){if(!f.value){m.warning("请先同意用户协议和隐私政策");return}try{if(!await p.value.validate())return;d.value=!0;const e=await V.register(t);e.success?(m.success("注册成功！"),b.push("/home")):m.error(e.message||"注册失败")}catch{m.error("注册失败，请重试")}finally{d.value=!1}}};return(g,e)=>{const n=a("el-input"),i=a("el-form-item"),w=a("el-link"),y=a("el-checkbox"),x=a("el-button"),R=a("el-form"),z=a("router-link"),U=a("Edit"),c=a("el-icon"),C=a("ChatDotRound"),P=a("Trophy");return B(),A("div",M,[r("div",N,[r("div",L,[e[12]||(e[12]=r("div",{class:"form-header"},[r("h1",{class:"form-title"},"注册"),r("p",{class:"form-subtitle"},"创建您的账号，开始分享技术")],-1)),s(R,{ref_key:"registerFormRef",ref:p,model:t,rules:k,class:"register-form",onSubmit:F(v,["prevent"])},{default:o(()=>[s(i,{prop:"username"},{default:o(()=>[s(n,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=l=>t.username=l),placeholder:"请输入用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(i,{prop:"nickname"},{default:o(()=>[s(n,{modelValue:t.nickname,"onUpdate:modelValue":e[1]||(e[1]=l=>t.nickname=l),placeholder:"请输入昵称",size:"large","prefix-icon":"Avatar"},null,8,["modelValue"])]),_:1}),s(i,{prop:"email"},{default:o(()=>[s(n,{modelValue:t.email,"onUpdate:modelValue":e[2]||(e[2]=l=>t.email=l),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(i,{prop:"password"},{default:o(()=>[s(n,{modelValue:t.password,"onUpdate:modelValue":e[3]||(e[3]=l=>t.password=l),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{prop:"confirmPassword"},{default:o(()=>[s(n,{modelValue:t.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=l=>t.confirmPassword=l),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(i,null,{default:o(()=>[s(y,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=l=>f.value=l)},{default:o(()=>[e[8]||(e[8]=u(" 我已阅读并同意 ",-1)),s(w,{type:"primary",underline:!1},{default:o(()=>[...e[6]||(e[6]=[u("《用户协议》",-1)])]),_:1}),e[9]||(e[9]=u(" 和 ",-1)),s(w,{type:"primary",underline:!1},{default:o(()=>[...e[7]||(e[7]=[u("《隐私政策》",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(i,null,{default:o(()=>[s(x,{type:"primary",size:"large",class:"register-button",loading:d.value,onClick:v},{default:o(()=>[u(D(d.value?"注册中...":"注册"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),r("div",Z,[r("p",I,[e[11]||(e[11]=u(" 已有账号？ ",-1)),s(z,{to:"/login",class:"login-link"},{default:o(()=>[...e[10]||(e[10]=[u("立即登录",-1)])]),_:1})])])]),r("div",$,[r("div",j,[e[16]||(e[16]=r("h2",{class:"banner-title"},"加入我们",-1)),e[17]||(e[17]=r("p",{class:"banner-subtitle"},"与技术爱好者一起成长",-1)),r("div",G,[r("div",H,[s(c,{class:"feature-icon"},{default:o(()=>[s(U)]),_:1}),e[13]||(e[13]=r("span",null,"发布技术文章",-1))]),r("div",J,[s(c,{class:"feature-icon"},{default:o(()=>[s(C)]),_:1}),e[14]||(e[14]=r("span",null,"参与技术讨论",-1))]),r("div",K,[s(c,{class:"feature-icon"},{default:o(()=>[s(P)]),_:1}),e[15]||(e[15]=r("span",null,"获得社区认可",-1))])])])])])])}}},Y=E(O,[["__scopeId","data-v-62fe720b"]]);export{Y as default};
